<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	data-th-replace="~{layouts/layout :: layout-enchere(
              titrePage=~{:: title}, 
              contenuPage=~{:: main}, 
              ressourcesSupp=~{:: #ressources-css})}">
<head>
<meta charset="UTF-8">
<title>S'enregistrer</title>
<th:block id="ressources-css">
	<link rel="stylesheet" th:href="@{/css/register.css}" />
</th:block>
<script>
	function validateForm() {
		var email = document.getElementById("email").value;
		var verifyEmail = document.getElementById("verifyEmail").value;
		var motDePasse = document.getElementById("motDePasse").value;
		var verifyMotDePasse = document.getElementById("verifyMotDePasse").value;

		// Vérification des emails
		if (email !== verifyEmail) {
			alert("Les adresses email ne correspondent pas.");
			return false;
		}

		// Vérification des mots de passe
		if (motDePasse !== verifyMotDePasse) {
			alert("Les mots de passe ne correspondent pas.");
			return false;
		}

		// Vérification du pattern de l'email
		var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
		if (!emailPattern.test(email)) {
			alert("L'adresse email n'est pas valide.");
			return false;
		}

		return true;
	}
</script>
</head>
<body>
	<main>
		<h1>Nouveau Profil</h1>
		<form th:action="@{/register/new}" method="post" th:object="${utilisateur}" onsubmit="return validateForm()">
			<label for="pseudo">Pseudo (*):</label>
			<input type="text" id="pseudo" th:field="*{pseudo}" required />

			<label for="nom">Nom (*):</label>
			<input type="text" id="nom" th:field="*{nom}" required />

			<label for="prenom">Prénom (*):</label>
			<input type="text" id="prenom" th:field="*{prenom}" required />

			<label for="email">Email (*):</label>
			<input type="email" id="email" th:field="*{email}" required />

			<label for="verifyEmail">Vérifier Email (*):</label>
			<input type="email" id="verifyEmail" required />

			<label for="telephone">Téléphone:</label>
			<input type="text" id="telephone" th:field="*{telephone}" />

			<label for="adresse">Adresse (*):</label>
			<div>
				<input type="text" id="rue" th:field="*{adresse.rue}" placeholder="Rue" required />
				<input type="text" id="codePostal" th:field="*{adresse.codePostal}" placeholder="Code Postal" required />
				<input type="text" id="ville" th:field="*{adresse.ville}" placeholder="Ville" required />
			</div>

			<label for="motDePasse">Mot de passe (*):</label>
			<input type="password" id="motDePasse" th:field="*{motDePasse}" required />

			<label for="verifyMotDePasse">Vérifier Mot de passe (*):</label>
			<input type="password" id="verifyMotDePasse" required />

			<div class="button-group">
				<button type="submit">Créer</button>
				<a th:href="@{/}" class="button">Annuler</a>
			</div>
		</form>
	</main>
</body>
</html>
